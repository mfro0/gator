
X11=/usr/X11R6/

X11CFLAGS=@X_CFLAGS@
X11LIBS=@X_PRE_LIBS@ @X_LIBS@ @X_EXTRA_LIBS@ -lX11 -lXext -lXv

DEFINES=

CC=gcc -pipe -g $(INCLUDES) $(DEFINES)

SRCS=xv.c frequencies.c xmisc.c string_cache.c v4l.c formats.c

LIBS=-lm -ldl $(X11LIBS)

TCLLIBS=-ltcl
TKLIBS=-ltk


all: avview

test: avview 
	sync
	bash -c 'export DISPLAY=:0.0; ./avview.scp control=inspire:0.0'

#	./read_pci.scp

avview: $(SRCS) main.c
	$(CC) $(X11CFLAGS) $(SRCS) $(TCLLIBS) $(TKLIBS) $(LIBS) main.c -o avview 

avview.static: $(SRCS) main.c
	$(CC) -static $(X11CFLAGS) $(SRCS) $(TCLLIBS) $(LIBS) main.c -lm -dl -o avview.static
	strip avview.static
	
	
tarball:
	(cd .. ; tar cvf - avview/*.scp avview/*.[c,h] avview/Makefile.in avview/configure.in avview/configure avview/README | gzip - ) > avview.tgz

clean:
	rm -f *.o *.bck *.bak core
